<html>
<head>
	<title>Hello, World! example for mxGraph</title>

	<link rel="stylesheet" type="text/css" href="../../rs/lib/ext-3.3.1/resources/css/ext-all.css" />
    <script type="text/javascript" src="../../rs/lib/ext-3.3.1/adapter/ext/ext-base.js"></script>
    <script type="text/javascript" src="../../rs/lib/ext-3.3.1/ext-all.js"></script>
    
    <script type="text/javascript">
        mxBasePath = '../../rs/lib/mxgraph-1.8.0';
    </script>
    
	<script type="text/javascript" src="../../rs/lib/mxgraph-1.8.0/mxclient-ie.js"></script>
	
	<script type="text/javascript" src="../../rs/ext/mxgraph/RsGraph.js"></script>
	<script type="text/javascript" src="../../rs/ext/mxgraph/RsGraphPanel.js"></script>
	
	<script type="text/javascript">
		Ext.onReady(function() {

			var p1 = new Rs.ext.mxgraph.RsGraphPanel({
				width : 400,
                height : 300,
                renderTo : 'div1'
			});
			Ext.fly('btn1').on('click', function(){
		    	var data = {
	                    vertices : [{
	                        id : 'a',
	                        value : 'A',
	                        x : 20, 
	                        y : 20,
	                        width : 40,
	                        height : 40,
	                        style : ''
	                    }, {
	                        id : 'b',
	                        value : 'B',
	                        x : 90,
	                        y : 90,
	                        width : 40,
	                        height : 40
	                    }, {
	                        id : 'c',
	                        value : 'C',
	                        x : 20,
	                        y : 90,
	                        width : 40,
	                        height : 40
	                    }, {
	                        id : 'd',
	                        value : 'D',
	                        x : 20,
	                        y : 280,
	                        width : 40,
	                        height : 40
	                    }],
	                    edges : [{
	                        id : 'a-b',
	                        value : '-->',
	                        source : 'a',
	                        target : 'b'
	                    }, {
	                        id : 'a-c',
	                        value : '-->',
	                        source : 'a',
	                        target : 'c'
	                    }, {
	                        id : 'c-d',
	                        value : '-->',
	                        source : 'c',
	                        target : 'd'
	                    }]
	                };
		        p1.getGraph().loadData(data)
			}, this);

			Ext.fly('btn2').on('click', function(){
				p1.getGraph().removeAllCells();
			}, this);

		    Ext.fly('btn3').on('click', function(){
		    	p1.getGraph().highLightCells(['a', 'a-b', 'b', 'a-c', 'c', 'c-d', 'd']);
			}, this);

		    
		    var g2 = new Rs.ext.mxgraph.RsGraph({
		    	enabled : true,   //可进行编辑
		    	jsonData : {
	                vertices : [{
	                    id : 'a',
	                    value : '开始',
	                    x : 20, 
	                    y : 20,
	                    width : 40,
	                    height : 40,
	                    style : 'start'
	                }, {
	                    id : 'b',
	                    value : '已完成',
	                    x : 90,
	                    y : 90,
	                    width : 40,
	                    height : 40,
	                    style : 'completed'
	                }, {
	                    id : 'c',
	                    value : '运行中',
	                    x : 20,
	                    y : 120,
	                    width : 40,
	                    height : 40,
	                    style : 'running'
	                }, {
		                id : 'd',
		                value : '初始化',
		                x : 90,
		                y : 150,
		                width : 40,
		                height : 40,
		                style : 'init'
		            }, {
			            id : 'e',
			            value : '等待中',
			            x : 20,
			            y : 190,
			            width : 40,
			            height : 40,
			            style : 'waiting'
			        }, {
	                    id : 'g',
	                    value : '结束',
	                    x : 90,
	                    y : 210,
	                    width : 40,
	                    height : 40,
	                    style : 'end'
	                }],
	                edges : [{
	                    id : 'a-b',
	                    value : '开始',
	                    source : 'a',
	                    target : 'b'
	                }, {
	                    id : 'a-c',
	                    value : '-->',
	                    source : 'a',
	                    target : 'c'
	                }, {
	                    id : 'c-d',
	                    value : '-->',
	                    source : 'c',
	                    target : 'd'
	                }]
	            }
			});
		    
		    var style = {};
		    style[mxConstants.STYLE_SHAPE] = mxConstants.SHAPE_RHOMBUS;
            style[mxConstants.STYLE_PERIMETER] = mxPerimeter.RhombusPerimeter;
            style[mxConstants.STYLE_STROKECOLOR] = 'gray';
            style[mxConstants.STYLE_FONTCOLOR] = 'gray';
            style[mxConstants.STYLE_FILLCOLOR] = '#91BCC0';
            style[mxConstants.STYLE_GRADIENTCOLOR] = 'white';
            style[mxConstants.STYLE_ALIGN] = mxConstants.ALIGN_CENTER;
            style[mxConstants.STYLE_VERTICAL_ALIGN] = mxConstants.ALIGN_MIDDLE;
            style[mxConstants.STYLE_FONTSIZE] = '14';
		    g2.putCellStyle('aaa', style);
		    
		    var w1 = new Ext.Window( {
                layout:'fit',
                width:500,
                height:500,
                closeAction:'hide',
                plain: true,
                items: new Rs.ext.mxgraph.RsGraphPanel({
                    graph : g2
                })
            });
	        Ext.fly('btn4').on('click', function(){
	            w1.show();
	        }, this);

	        var xml = '<mxGraphModel><root><mxCell id="0"/><mxCell id="1" parent="0"/>'+
	            '<mxCell id="2" value="Claim Handling Process" style="swimlane" vertex="1" parent="1"><mxGeometry x="1" width="840" height="400" as="geometry"/></mxCell>'+
	            '<mxCell id="3" value="Claim Manager" style="swimlane" vertex="1" parent="2"><mxGeometry x="24" width="816" height="200" as="geometry"/></mxCell>'+
	            '<mxCell id="5" value="" style="start" vertex="1" parent="3"><mxGeometry x="40" y="85" width="30" height="30" as="geometry"/></mxCell>'+
	            '<mxCell id="AuthorizeClaim" value="Authorize&#xa;Claim" vertex="1" parent="3"><mxGeometry x="90" y="80" width="100" height="40" as="geometry"/></mxCell>'+
	            '<mxCell id="6" value="X" style="step" vertex="1" parent="3"><mxGeometry x="210" y="85" width="30" height="30" as="geometry"/></mxCell>'+
	            '<mxCell id="ApproveClaim" value="Approve&#xa;Claim" vertex="1" parent="3"><mxGeometry x="260" y="80" width="100" height="40" as="geometry"/></mxCell>'+
	            '<mxCell id="7" value="X" style="step" vertex="1" parent="3"><mxGeometry x="380" y="85" width="30" height="30" as="geometry"/></mxCell>'+
	            '<mxCell id="8" value="" edge="1" parent="3" source="5" target="AuthorizeClaim"><mxGeometry relative="1" as="geometry"/></mxCell>'+
	            '<mxCell id="9" value="" edge="1" parent="3" source="AuthorizeClaim" target="6"><mxGeometry relative="1" as="geometry"/></mxCell>'+
	            '<mxCell id="10" value="" edge="1" parent="3" source="6" target="ApproveClaim"><mxGeometry relative="1" as="geometry"/></mxCell>'+
	            '<mxCell id="11" value="" edge="1" parent="3" source="ApproveClaim" target="7"><mxGeometry relative="1" as="geometry"/></mxCell>'+
	            '<mxCell id="12" value="" edge="1" parent="3" source="7" target="AuthorizeClaim"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="140" y="40"/></Array></mxGeometry></mxCell>'+
	            '<mxCell id="ReviewClaim" value="Review&#xa;Claim" vertex="1" parent="3"><mxGeometry x="480" y="80" width="100" height="40" as="geometry"/></mxCell>'+
	            '<mxCell id="22" value="X" style="step" vertex="1" parent="3"><mxGeometry x="600" y="85" width="30" height="30" as="geometry"/></mxCell>'+
	            '<mxCell id="23" value="" edge="1" parent="3" source="ReviewClaim" target="22"><mxGeometry relative="1" as="geometry"/></mxCell>'+
	            '<mxCell id="ApproveReviewedClaim" value="Approve Rev.&#xa;Claim" vertex="1" parent="3"><mxGeometry x="650" y="80" width="100" height="40" as="geometry"/></mxCell>'+
	            '<mxCell id="26" value="" edge="1" parent="3" source="22" target="ApproveReviewedClaim"><mxGeometry relative="1" as="geometry"/></mxCell>'+
	            '<mxCell id="27" value="X" style="step" vertex="1" parent="3"><mxGeometry x="770" y="85" width="30" height="30" as="geometry"/></mxCell>'+
	            '<mxCell id="28" value="" edge="1" target="27" parent="3" source="ApproveReviewedClaim"><mxGeometry relative="1" as="geometry"><mxPoint x="740" y="100" as="sourcePoint"/><mxPoint x="760" y="100" as="targetPoint"/></mxGeometry></mxCell>'+
	            '<mxCell id="32" value="" edge="1" parent="3" source="27" target="ReviewClaim"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="665" y="160"/></Array></mxGeometry></mxCell>'+
	            '<mxCell id="4" value="Accountant" style="swimlane" vertex="1" parent="2"><mxGeometry x="24" y="200" width="816" height="200" as="geometry"/></mxCell>'+
	            '<mxCell id="EnterAccountingData" value="Enter&#xa;Data" vertex="1" parent="4"><mxGeometry x="430" y="80" width="100" height="40" as="geometry"/></mxCell>'+
	            '<mxCell id="14" value="X" style="step" vertex="1" parent="4"><mxGeometry x="550" y="85" width="30" height="30" as="geometry"/></mxCell>'+
	            '<mxCell id="15" value="" edge="1" parent="4" source="EnterAccountingData" target="14"><mxGeometry relative="1" as="geometry"/></mxCell>'+
	            '<mxCell id="CheckAccountingData" value="Check&#xa;Data" vertex="1" parent="4"><mxGeometry x="600" y="80" width="100" height="40" as="geometry"/></mxCell>'+
	            '<mxCell id="16" value="" edge="1" parent="4" source="14" target="CheckAccountingData"><mxGeometry relative="1" as="geometry"/></mxCell>'+
	            '<mxCell id="17" value="X" style="step" vertex="1" parent="4"><mxGeometry x="720" y="85" width="30" height="30" as="geometry"/></mxCell>'+
	            '<mxCell id="18" value="" edge="1" parent="4" source="CheckAccountingData" target="17"><mxGeometry relative="1" as="geometry"/></mxCell>'+
	            '<mxCell id="19" value="" style="end" vertex="1" parent="4"><mxGeometry x="770" y="85" width="30" height="30" as="geometry"/></mxCell>'+
	            '<mxCell id="20" value="" edge="1" parent="4" source="17" target="19"><mxGeometry relative="1" as="geometry"/></mxCell>'+
	            '<mxCell id="31" value="" edge="1" parent="4" source="17" target="EnterAccountingData"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="625" y="160"/></Array></mxGeometry></mxCell>'+
	            '<mxCell id="13" value="" edge="1" parent="2" source="7" target="EnterAccountingData"><mxGeometry relative="1" as="geometry"/></mxCell>'+
	            '<mxCell id="24" value="" edge="1" parent="2" source="14" target="ReviewClaim" style="edgeStyle=none"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="589" y="180"/><mxPoint x="480" y="180"/><mxPoint x="480" y="100"/></Array></mxGeometry></mxCell>'+
	            '<mxCell id="29" value="" edge="1" parent="2" source="22" target="EnterAccountingData"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="469" y="40"/></Array></mxGeometry></mxCell>'+
	            '<mxCell id="30" value="" edge="1" parent="2" source="27" target="EnterAccountingData"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="469" y="40"/></Array></mxGeometry></mxCell>'+
	            '<mxCell id="33" value="" edge="1" parent="2" source="6" target="EnterAccountingData"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="249" y="200"/></Array></mxGeometry></mxCell>'+
	            '</root></mxGraphModel>';
	        
	        var g3 = new Rs.ext.mxgraph.RsGraph({
	        	xmlData : xml 
	        });

	        g3.putVertexStyle(mxConstants.STYLE_FONTSIZE, '12');
            g3.putVertexStyle(mxConstants.STYLE_FONTCOLOR, 'black');
            g3.putVertexStyle(mxConstants.STYLE_STROKECOLOR, 'black');
            g3.putVertexStyle(mxConstants.STYLE_FILLCOLOR, 'white');
            g3.putVertexStyle(mxConstants.STYLE_GRADIENTCOLOR, 'white');
            g3.putVertexStyle(mxConstants.STYLE_GRADIENT_DIRECTION, mxConstants.DIRECTION_EAST);
            g3.putVertexStyle(mxConstants.STYLE_ROUNDED, true);
            g3.putVertexStyle(mxConstants.STYLE_SHADOW, true);
            g3.putVertexStyle(mxConstants.STYLE_FONTSTYLE, 1);
            
            g3.putEdgeStyle(mxConstants.STYLE_EDGE, mxEdgeStyle.ElbowConnector);
            g3.putEdgeStyle(mxConstants.STYLE_STROKECOLOR, 'black');
            g3.putEdgeStyle(mxConstants.STYLE_ROUNDED, true);


            var style = [];
            style[mxConstants.STYLE_SHAPE] = mxConstants.SHAPE_SWIMLANE;
            style[mxConstants.STYLE_PERIMETER] = mxPerimeter.RectanglePerimeter;
            style[mxConstants.STYLE_STROKECOLOR] = 'gray';
            style[mxConstants.STYLE_FONTCOLOR] = 'black';
            style[mxConstants.STYLE_FILLCOLOR] = '#E0E0DF';
            style[mxConstants.STYLE_GRADIENTCOLOR] = 'white';
            style[mxConstants.STYLE_ALIGN] = mxConstants.ALIGN_CENTER;
            style[mxConstants.STYLE_VERTICAL_ALIGN] = mxConstants.ALIGN_TOP;
            style[mxConstants.STYLE_STARTSIZE] = 24;
            style[mxConstants.STYLE_FONTSIZE] = '12';
            style[mxConstants.STYLE_FONTSTYLE] = 1;
            style[mxConstants.STYLE_HORIZONTAL] = false;
            g3.putCellStyle('swimlane', style);

            style = [];
            style[mxConstants.STYLE_SHAPE] = mxConstants.SHAPE_RHOMBUS;
            style[mxConstants.STYLE_PERIMETER] = mxPerimeter.RhombusPerimeter;
            style[mxConstants.STYLE_STROKECOLOR] = 'gray';
            style[mxConstants.STYLE_FONTCOLOR] = 'gray';
            style[mxConstants.STYLE_FILLCOLOR] = '#91BCC0';
            style[mxConstants.STYLE_GRADIENTCOLOR] = 'white';
            style[mxConstants.STYLE_ALIGN] = mxConstants.ALIGN_CENTER;
            style[mxConstants.STYLE_VERTICAL_ALIGN] = mxConstants.ALIGN_MIDDLE;
            style[mxConstants.STYLE_FONTSIZE] = '14';
            g3.putCellStyle('step', style);

            style = [];
            style[mxConstants.STYLE_SHAPE] = mxConstants.SHAPE_ELLIPSE;
            style[mxConstants.STYLE_PERIMETER] = mxPerimeter.EllipsePerimeter;
            style[mxConstants.STYLE_STROKECOLOR] = 'gray';
            style[mxConstants.STYLE_FONTCOLOR] = 'gray';
            style[mxConstants.STYLE_FILLCOLOR] = '#A0C88F';
            style[mxConstants.STYLE_GRADIENTCOLOR] = 'white';
            style[mxConstants.STYLE_ALIGN] = mxConstants.ALIGN_CENTER;
            style[mxConstants.STYLE_VERTICAL_ALIGN] = mxConstants.ALIGN_MIDDLE;
            style[mxConstants.STYLE_FONTSIZE] = '14';
            g3.putCellStyle('start', style);
            
            style = mxUtils.clone(style);
            style[mxConstants.STYLE_FILLCOLOR] = '#DACCBC';
            style[mxConstants.STYLE_STROKECOLOR] = '#AF7F73';
            style[mxConstants.STYLE_STROKEWIDTH] = 3;
            g3.putCellStyle('end', style);
                        
	        var p3 = new Rs.ext.mxgraph.RsGraphPanel({
		        graph : g3,
		        width : 1024,
		        height : 800,
		        renderTo : 'div3'
		    });
			
		}, this);
	</script>
</head>
<body id="body" style="margin:10px;">
    <div id="msg"></div>
	
	<input id='btn1' type='button' value='load data'></input>
	<input id='btn2' type='button' value='remove cells'></input>
	<input id='btn3' type='button' value='high light'></input>
	<input id='btn4' type='button' value='window'></input>
	
	<div id="div1"></div>
	<div id="div2"></div>
	<div id="div3"></div>
</body>
</html>
